<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>ImpÃ©rio GÃ¡s - Atendimento</title>
<style>
body { background:#111; color:#fff; font-family:Arial; margin:0; }
.chat { max-width:420px; margin:auto; padding:10px; }
.msg { padding:10px; margin:6px 0; border-radius:8px; }
.bot { background:#222; }
.user { background:#0a84ff; text-align:right; }
input, button {
  width:100%;
  padding:12px;
  margin-top:6px;
  border:none;
  border-radius:6px;
}
button { background:#28a745; color:white; font-size:15px; }
</style>
</head>
<body>

<div class="chat" id="chat">
  <div class="msg bot">
    ğŸ¤– OlÃ¡! Bem-vindo ao <b>ImpÃ©rio GÃ¡s</b><br>
    ğŸ”¥ GÃ¡s P13 â€” R$120<br>
    ğŸ’³ Pagamento via PIX
  </div>
</div>

<input id="text" placeholder="Digite sua mensagem">
<button onclick="send()">Enviar</button>
<button onclick="sendLocation()">ğŸ“ Enviar localizaÃ§Ã£o (GPS)</button>

<script>
const PIX = "16301937473";

function addMsg(text, type){
  const chat = document.getElementById("chat");
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function send(){
  const input = document.getElementById("text");
  const text = input.value.toLowerCase();
  if(!text) return;
  addMsg(input.value, "user");
  input.value = "";

  let reply = "â“ NÃ£o entendi.\nDigite: preÃ§o, pix ou pedido.";

  if(text.includes("oi") || text.includes("olÃ¡")){
    reply = "ğŸ‘‹ OlÃ¡! Posso ajudar com seu pedido?";
  }
  else if(text.includes("preÃ§o")){
    reply = "ğŸ’° GÃ¡s P13 custa R$120";
  }
  else if(text.includes("pix") || text.includes("pagamento")){
    reply = "ğŸ’³ Pagamento via PIX\nğŸ”‘ Chave (CPF): 163.019.374-73";
    setTimeout(addPixButton, 500);
  }
  else if(text.includes("pedido")){
    reply = "ğŸ“ Para finalizar, envie sua localizaÃ§Ã£o GPS.";
  }

  setTimeout(()=>addMsg(reply,"bot"),400);
}

function addPixButton(){
  const chat = document.getElementById("chat");
  const btn = document.createElement("button");
  btn.innerText = "ğŸ“‹ Copiar chave PIX";
  btn.onclick = () => {
    navigator.clipboard.writeText(PIX);
    alert("âœ… Chave PIX copiada!");
  };
  chat.appendChild(btn);
}

function sendLocation(){
  if(!navigator.geolocation){
    alert("GPS nÃ£o suportado");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    pos => {
      const pedido = {
        data: new Date().toLocaleString(),
        lat: pos.coords.latitude,
        lon: pos.coords.longitude,
        acc: pos.coords.accuracy
      };

      let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
      pedidos.push(pedido);
      localStorage.setItem("pedidos", JSON.stringify(pedidos));

      addMsg("ğŸ“ LocalizaÃ§Ã£o enviada com sucesso!", "bot");
    },
    () => alert("âŒ Permita o acesso Ã  localizaÃ§Ã£o"),
    { enableHighAccuracy: true }
  );
}
</script>

</body>
</html>
